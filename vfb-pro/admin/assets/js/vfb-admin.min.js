jQuery(document).ready(function($){$(document).on("click",".vfb-item-edit-link",function(e){e.preventDefault(),$(e.target).closest("li").children(".vfb-field-item-settings").slideToggle("fast"),$(this).toggleClass("opened");var t=$(e.target).closest("dl");t.hasClass("vfb-field-item-inactive")?t.removeClass("vfb-field-item-inactive").addClass("vfb-field-item-active"):t.removeClass("vfb-field-item-active").addClass("vfb-field-item-inactive")}),$(document).on("click",".vfb-field-adv-settings-link",function(e){e.preventDefault(),$(this).parents(".vfb-row").children(".vfb-field-adv-settings").toggle();var t=$(this).children(".dashicons");t.hasClass("dashicons-arrow-down")?t.removeClass("dashicons-arrow-down").addClass("dashicons-arrow-up"):t.removeClass("dashicons-arrow-up").addClass("dashicons-arrow-down")}),$(document).on("click",".vfb-field-validation-settings-link",function(e){e.preventDefault(),$(this).parents(".vfb-row").children(".vfb-field-validation-settings").toggle();var t=$(this).children(".dashicons");t.hasClass("dashicons-arrow-down")?t.removeClass("dashicons-arrow-down").addClass("dashicons-arrow-up"):t.removeClass("dashicons-arrow-up").addClass("dashicons-arrow-down")}),$(document).on("change",".vfb-hidden-option",function(){var e=$(this).attr("id").match(new RegExp(/(\d+)$/g),"");"custom"===$(this).val()?($("#vfb-hidden-custom-"+e).show(),$("#vfb-hidden-seq-start-"+e).hide(),$("#vfb-hidden-seq-step-"+e).hide()):"sequential-num"===$(this).val()?($("#vfb-hidden-custom-"+e).hide(),$("#vfb-hidden-seq-start-"+e).show(),$("#vfb-hidden-seq-step-"+e).show()):($("#vfb-hidden-custom-"+e).hide(),$("#vfb-hidden-seq-start-"+e).hide(),$("#vfb-hidden-seq-step-"+e).hide())})}),jQuery(document).ready(function($){$("#vfb-form-items .vfb-draggable-form-items").draggable({connectToSortable:"#vfb-fields-list",helper:function(){var e='<dl class="vfb-field-item-bar"><dt class="vfb-field-item-handle"><span class="vfb-field-item-title">'+$(this).text()+"</span></dt></dl>";return e},distance:2,zIndex:5,cursorAt:{top:20},containment:"document"}),$("#vfb-fields-list").sortable({handle:".vfb-field-item-handle",placeholder:"vfb-sortable-placeholder",forcePlaceholderSize:!0,forceHelperSize:!0,tolerance:"pointer",create:function(){$(this).css("min-height",$(this).height())},stop:function(e,t){if(t.item.hasClass("ui-draggable-dragging")){t.item.hide();var i=$("#vfb-form-items").serializeArray(),n=t.item.text(),a=t.item,o=$(".vfb-accordion-section-content .spinner").show();$.post(ajaxurl,{action:"vfbp-create-field",order:$(this).sortable("toArray"),data:i,field_type:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){o.hide();var t=$(e),i=t.closest("li.vfb-field-item").attr("id");t.hide().insertBefore(a),$("#"+i).fadeIn(),a.remove()})}else $.post(ajaxurl,{action:"vfbp-sort-field",order:$(this).sortable("serialize"),vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done()}}),$("#vfb-form-items .vfb-draggable-form-items").click(function(e){e.preventDefault();var t=$("#vfb-form-items").serializeArray(),i=$(this).text(),n=$(".vfb-accordion-section-content .spinner").show();$.post(ajaxurl,{action:"vfbp-create-field",data:t,field_type:i,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){n.hide(),$("#vfb-fields-list").append(e)})})}),jQuery(document).ready(function($){$(document).on("click",".vfb-field-delete",function(e){e.preventDefault();var t=[],i=$(this).attr("href"),n=i.split("&"),a=vfbpL10n.confirmTitle,o=vfbpL10n.confirmText,s=vfbpL10n.confirmButton;$.confirm({title:a,text:o,confirmButton:s,confirm:function(){for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),a=n[e].substring(0,i),o=n[e].substring(i+1);t[a]=o}$.post(ajaxurl,{action:"vfbp-delete-field",field:t.field,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(){$("#vfb-field-item-"+t.field).animate({opacity:0,height:0},350,function(){$(this).remove()})})},cancel:function(){return!1}})})}),jQuery(document).ready(function($){$(document).on("click",".vfb-field-duplicate",function(e){e.preventDefault();for(var t=[],i=$(this).attr("href"),n=i.split("&"),a=0;a<n.length;a++){var o=n[a].indexOf("="),s=n[a].substring(0,o),r=n[a].substring(o+1);t[s]=r}$.post(ajaxurl,{action:"vfbp-duplicate-field",field:t.field,order:$("#vfb-fields-list").sortable("toArray"),vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){var i=$(e).attr("id");$(e).hide().insertAfter("#vfb-field-item-"+t.field),$("#"+i).fadeIn()})})}),jQuery(document).ready(function($){$(".vfb-options-table").sortable({items:".vfb-option",handle:".vfb-sort-option",helper:function(e,t){var i=t.children(),n=t.clone();return n.children().each(function(e){$(this).width(i.eq(e).width())}),n}}),$('.vfb-options-table input[type="radio"]').mousedown(function(){$(this).attr("previousValue",$(this).prop("checked"))}).click(function(){var e=$(this).attr("previousValue");"true"===e&&$(this).prop("checked",!1)}),$(document).on("click",".vfb-button-option-add",function(e){e.preventDefault();var t=$(this).closest(".vfb-options-table").children(".vfb-cloned-options"),i=t.children(),n=i.length,a=n+1,o=i[n-1],s=$(o).attr("id"),r=s.match(new RegExp(/\w+$/g));a=parseInt(r[0])+1;var c=s.replace(new RegExp(/(\d+)$/g),""),f=$("#"+s).clone().attr("id",c+a),l=$(o).find('input[type="text"]').attr("name"),p=$(o).find('input[type="checkbox"]').attr("name"),d=l.replace(new RegExp(/\[(\d+)\]/g),"["+a+"]"),v=p.replace(new RegExp(/\[(\d+)\]/g),"["+a+"]");f.find('input[type="text"]').attr("id",c+a).attr("name",d),f.find('input[type="checkbox"]').attr("id",c+a).attr("name",v),f.find('input[type="radio"]').attr("value",a),t.append(f)}),$(document).on("click",".vfb-delete-option",function(e){e.preventDefault();var t=$(this).closest(".vfb-options-table").children(".vfb-cloned-options").children(".vfb-option").length;t-1===0?window.alert("You must have at least one option."):$(this).closest("tr").remove()}),$(document).on("click",".vfb-bulk-options",function(e){e.preventDefault();var t=[],i=$(this).attr("id"),n=i.match(new RegExp(/\w+$/g));$(this).parent().find("li").each(function(){t.push($(this).text())}),$("#bulk-choices-text-"+n).val(t.join("\n"))}),$(document).on("click",".vfb-bulk-add-options",function(e){e.preventDefault();for(var t=[],i=$(this).attr("href"),n=i.split("&"),a=0;a<n.length;a++){var o=n[a].indexOf("="),s=n[a].substring(0,o),r=n[a].substring(o+1);t[s]=r}var c=t.field,f=$("#bulk-choices-text-"+c).val(),l=f.split("\n"),p=[],d=$("#vfb-field-item-"+c+" .vfb-cloned-options"),v=d.children(),u=v.length,b=u+1,h=v[u-1],m=$(h).attr("id"),g=m.match(new RegExp(/\w+$/g));b=parseInt(g[0])+1;var _=m.replace(new RegExp(/(\d+)$/g),"");for(a=0;a<l.length;++a){p[a]=$("#"+m).clone().attr("id",_+b);var x=$(h).find('input[type="text"]').attr("name"),y=$(h).find('input[type="checkbox"]').attr("name"),w=x.replace(new RegExp(/\[(\d+)\]/g),"["+b+"]"),k=y.replace(new RegExp(/\[(\d+)\]/g),"["+b+"]");p[a].find('input[type="text"]').attr("id",_+b).attr("name",w).attr("value",l[a]),p[a].find('input[type="checkbox"]').attr("id",_+b).attr("name",k),p[a].find('input[type="radio"]').attr("value",b),b++}$("#"+m).after(p),window.tb_remove()}),$(document).on("change",".vfb-allow-other",function(){var e=$(this).parents(".vfb-form-group").children(".vfb-allow-other-input");$(e).toggle($(this).prop("checked"))})}),jQuery(document).ready(function($){$("#vfb-forms-switch-btn").click(function(e){e.preventDefault();var t=window.location.href,i=$(this).prev().val(),n=t.replace(new RegExp(/(form=)\d+/g),"$1"+i);window.location=n})}),jQuery(document).ready(function($){var e=null;$(document).on("mouseenter mouseleave",".vfb-tooltip",function(t){var i=$(this).attr("data-title"),n=$(this).attr("data-content"),a='<div class="vfb-tooltip-popup"><div class="vfb-tooltip-arrow"></div><h3>'+i+"</h3><p>"+n+"</p></div>";"mouseenter"===t.type?(e&&(clearTimeout(e),e=null),$(this).append(a),$(this).find(".vfb-tooltip-popup").css({top:"-62px",left:25}),e=setTimeout(function(){$(".vfb-tooltip-popup").fadeIn(300)},500)):($(".vfb-tooltip-popup").fadeOut(500),$(this).children(".vfb-tooltip-popup").detach())})});var vfbFormValidate=jQuery.extend({invalidateForm:function(e){return jQuery(e).addClass("form-invalid").find("input:visible").change(function(){jQuery(this).closest(".form-invalid").removeClass("form-invalid")})},validateForm:function(e){return e=jQuery(e),!vfbFormValidate.invalidateForm(e.find(".form-required").filter(function(){return""===jQuery("input:visible",this).val()})).size()}},vfbFormValidate);jQuery(document).ready(function($){$("#vfbp-new-form").submit(function(){return vfbFormValidate.validateForm($(this))})}),jQuery(document).ready(function($){$("#expiration").datetimepicker()}),jQuery(document).ready(function($){$("#email-to").tagsInput({width:"35em",height:"auto",defaultText:"add an email",pattern:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/})}),jQuery(document).ready(function($){$("#type").change(function(){var e=$(this).val();$(".vfb-confirmation-type").hide(),$("#vfb-confirmation-"+e).show()})}),jQuery(document).ready(function($){CodeMirror.defineMode("wordpress",function(e,t){var i={token:function(e){var t;if(e.match("[")){for(;"undefined"!=typeof(t=e.next())&&"]"!==t;);return"wordpress"}for(;"undefined"!=typeof e.next()&&!e.match("[",!1););return null}};return CodeMirror.overlayMode(CodeMirror.getMode(e,t.backdrop||"htmlmixed"),i)}),$("#email-template").length&&CodeMirror.fromTextArea(document.getElementById("email-template"),{lineNumbers:!0,lineWrapping:!0,mode:"wordpress",theme:"base16-light"}),$(".vfb-color-picker").each(function(){var e=$(this),t=e.attr("id"),i=$("#"+t);i.wpColorPicker({change:function(e,t){i.css("background-color",t.color.toString())},clear:function(){i.css("background-color","")}})}),$("#email-template").bind("keydown.vfbInsertTab",function(e){var t=e.target,i,n,a,o,s;if(27===e.keyCode)return void $(t).data("tab-out",!0);if(!(9!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey)){if($(t).data("tab-out"))return void $(t).data("tab-out",!1);i=t.selectionStart,n=t.selectionEnd,a=t.value;try{this.lastKey=9}catch(r){}document.selection?(t.focus(),s=document.selection.createRange(),s.text="	"):i>=0&&(o=this.scrollTop,t.value=a.substring(0,i).concat("	",a.substring(n)),t.selectionStart=t.selectionEnd=i+1,this.scrollTop=o),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}}),$("#email-template").bind("blur.vfbInsertTab",function(){this.lastKey&&9===this.lastKey&&this.focus()}),$("#format").change(function(){var e=$(this).val();$(".vfb-email-type").hide(),$("#vfb-email-"+e).show()});var e,t=$(".vfb-header-img-container"),i=$(".vfb-header-img-id"),n=$(".vfb-header-img-upload"),a=$(".vfb-header-img-delete");n.click(function(o){return o.preventDefault(),e?void e.open():(e=wp.media({states:[new wp.media.controller.Library({title:vfbpL10n.chooseImage,library:wp.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:600,suggestedHeight:200})]}),e.on("select",function(){var o=e.state().get("selection").first().toJSON();t.append('<img src="'+o.url+'" alt="" style="max-width:100%;"/>'),i.val(o.id),n.addClass("hidden"),a.removeClass("hidden")}),void e.open())}),a.on("click",function(e){e.preventDefault(),t.html(""),n.removeClass("hidden"),a.addClass("hidden"),i.val("")})}),jQuery(document).ready(function($){var e=vfbpL10n.deleteCondition,t=vfbpL10n.deleteRule;$(document).on("click",".vfb-add-condition",function(e){e.preventDefault();var t=$(this).closest(".vfb-rules-table").children(".vfb-cloned-conditions"),i=t.children(),n=i.length,a=n+1,o=i[n-1],s=$(o).attr("id"),r=s.match(new RegExp(/\w+$/g));a=parseInt(r[0])+1;var c=s.replace(new RegExp(/(\d+)$/g),""),f=$("#"+s).clone().attr("id",c+a),l=f.find('input[type="text"], select'),p=0;l.each(function(){this.name=this.name.replace(new RegExp(/(\d+)/g),function(e){return 1===p?a:(p++,e)}),p=0}),t.append(f)}),$(document).on("click",".vfb-delete-condition",function(t){t.preventDefault();var i=$(this).closest(".vfb-rules-table").children(".vfb-cloned-conditions").children(".vfb-condition").length;i-1===0?window.alert(e):$(this).closest("tr").remove()}),$(document).on("click",".vfb-rules-actions-add",function(e){e.preventDefault();var t=$(this).closest(".vfb-rules"),i=t.length,n=i+1,a=t[i-1],o=$(a).attr("id"),s=o.match(new RegExp(/\w+$/g));n=parseInt(s[0])+1;var r=o.replace(new RegExp(/(\d+)$/g),""),c=$("#"+o).clone().attr("id",r+n),f=c.find('input[type="text"], select'),l=c.find(".vfb-condition"),p=0;f.each(function(){this.name=this.name.replace(new RegExp(/(\d+)/g),function(e){return 1===p?e:(p++,n)}),p=0});var d=0;l.each(function(){this.id=this.id.replace(new RegExp(/(\d+)/g),function(e){return 1===d?e:(d++,n)}),d=0}),c.insertAfter(t)}),$(document).on("click",".vfb-rules-actions-delete",function(e){e.preventDefault();var i=$(this).closest("tbody").children(".vfb-rules").length;i-1===0?window.alert(t):$(this).closest(".vfb-rules").remove()})}),jQuery(document).ready(function($){function e(e,t){$.post(ajaxurl,{action:"vfbp-price-fields-options",field:e,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){t.before(e)})}if($("#user-enable").change(function(){$(".vfb-create-user-settings").toggle($(this).prop("checked"))}),$("#post-enable").change(function(){$(".vfb-create-post-settings").toggle($(this).prop("checked"))}),$("#design-enable").change(function(){$(".vfb-form-design-settings").toggle($(this).prop("checked")),setTimeout(function(){t.refresh()},1)}),$("#cell-enable").change(function(){$(".vfb-cell-settings").toggle($(this).prop("checked"))}),$("#mailchimp-enable").change(function(){$(".vfb-mailchimp-settings").toggle($(this).prop("checked"))}),$("#campaign-monitor-enable").change(function(){$(".vfb-campaign-monitor-settings").toggle($(this).prop("checked"))}),$("#highrise-enable").change(function(){$(".vfb-highrise-settings").toggle($(this).prop("checked"))}),$("#freshbooks-enable").change(function(){$(".vfb-freshbooks-settings").toggle($(this).prop("checked"))}),$("#payments-enable").change(function(){$(".vfb-payments-settings").toggle($(this).prop("checked")),$(this).prop("checked")||$(".vfb-paypal-settings").hide()}),$("#payments-merchant").change(function(){var e=$(this).val();switch($(".vfb-paypal-settings").hide(),e){case"paypal":$(".vfb-paypal-settings").show()}}),$("#paypal-prepop-billing").change(function(){$(".vfb-paypal-billing").toggle($(this).prop("checked"))}),$("#paypal-recurring").change(function(){$(".vfb-paypal-recurring").toggle($(this).prop("checked"))}),$("#design-css").length)var t=CodeMirror.fromTextArea(document.getElementById("design-css"),{lineNumbers:!0,lineWrapping:!0,mode:"css",theme:"base16-light"});$(document).on("submit","#vfbp-designer-copy-settings",function(e){e.preventDefault();var t=$(this).serialize();$.post(ajaxurl,{action:"vfbp-form-designer-copy-settings-save",data:t,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(){window.tb_remove()})}),$("#vfb-mailchimp-verify-api .spinner, #vfb-mailchimp-deactivate-api .spinner,#vfb-campaign-monitor-verify-api .spinner, #vfb-campaign-monitor-deactivate-api .spinner #vfb-campaign-monitor-select-client .spinner,#vfb-highrise-verify-api .spinner, #vfb-highrise-deactivate-api .spinner,#vfb-freshbooks-verify-api .spinner, #vfb-freshbooks-deactivate-api .spinner").hide(),$("#vfb-mailchimp-verify-api").click(function(e){e.preventDefault();var t=$("#mailchimp-api").val(),i=$("#vfb-verified-mailchimp-text"),n=$('input[name="_vfbp_form_id"]').val(),a=$("#vfb-mailchimp-verify-api .spinner").show().css("visibility","visible");$.get(ajaxurl,{action:"vfbp-connect-mailchimp",api:t,form:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){a.hide();var t=$.parseJSON(e);$(i).html('<span class="status-'+t.status+'">'+t.message+"</span>"),$("#vfbp-addon-settings").submit()})}),$("#vfb-mailchimp-deactivate-api").click(function(e){e.preventDefault();var t=$("#mailchimp-api").val(),i=$("#vfb-verified-mailchimp-text"),n=$('input[name="_vfbp_form_id"]').val(),a=$("#vfb-mailchimp-verify-api .spinner").show().css("visibility","visible");$.get(ajaxurl,{action:"vfbp-disconnect-mailchimp",api:t,form:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){a.hide();var t=$.parseJSON(e);$(i).html('<span class="status-'+t.status+'">'+t.message+"</span>"),$("#vfbp-addon-settings").submit()})}),$("#vfb-campaign-monitor-verify-api").click(function(e){e.preventDefault();var t=$("#campaign-monitor-api").val(),i=$("#vfb-verified-campaign-monitor-text"),n=$('input[name="_vfbp_form_id"]').val(),a=$("#vfb-campaign-monitor-verify-api .spinner").show().css("visibility","visible");$.get(ajaxurl,{action:"vfbp-connect-campaign-monitor",api:t,form:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){a.hide();var t=$.parseJSON(e);$(i).html('<span class="status-'+t.status+'">'+t.message+"</span>"),$("#vfbp-addon-settings").submit()})}),$("#vfb-campaign-monitor-deactivate-api").click(function(e){e.preventDefault();var t=$("#campaign-monitor-api").val(),i=$("#vfb-verified-campaign-monitor-text"),n=$('input[name="_vfbp_form_id"]').val(),a=$("#vfb-campaign-monitor-verify-api .spinner").show().css("visibility","visible");$.get(ajaxurl,{action:"vfbp-disconnect-campaign-monitor",api:t,form:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){a.hide();var t=$.parseJSON(e);$(i).html('<span class="status-'+t.status+'">'+t.message+"</span>"),$("#vfbp-addon-settings").submit()})}),$("#vfb-campaign-monitor-select-client").click(function(e){e.preventDefault();var t=$("#campaign-monitor-api").val(),i=$("#campaign-monitor-client-id").val(),n=$('input[name="_vfbp_form_id"]').val(),a=$("#vfb-campaign-monitor-select-client .spinner").show().css("visibility","visible");$.get(ajaxurl,{action:"vfbp-campaign-monitor-select-client",api:t,client:i,form:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){a.hide(),$("#vfb-campaign-monitor-client-response").after(e)})}),$("#vfb-highrise-verify-api").click(function(e){e.preventDefault();var t=$("#highrise-api").val(),i=$("#highrise-subdomain").val(),n=$("#vfb-verified-highrise-text"),a=$('input[name="_vfbp_form_id"]').val(),o=$("#vfb-highrise-verify-api .spinner").show().css("visibility","visible");$.get(ajaxurl,{action:"vfbp-connect-highrise",api:t,domain:i,form:a,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){o.hide();var t=$.parseJSON(e);$(n).html('<span class="status-'+t.status+'">'+t.message+"</span>"),$("#vfbp-addon-settings").submit()})}),$("#vfb-highrise-deactivate-api").click(function(e){e.preventDefault();var t=$("#highrise-api").val(),i=$("#vfb-verified-highrise-text"),n=$('input[name="_vfbp_form_id"]').val(),a=$("#vfb-highrise-verify-api .spinner").show().css("visibility","visible");$.get(ajaxurl,{action:"vfbp-disconnect-highrise",api:t,form:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){a.hide();var t=$.parseJSON(e);$(i).html('<span class="status-'+t.status+'">'+t.message+"</span>"),$("#vfbp-addon-settings").submit()})}),$("#vfb-freshbooks-verify-api").click(function(e){e.preventDefault();var t=$("#freshbooks-api").val(),i=$("#freshbooks-subdomain").val(),n=$("#vfb-verified-freshbooks-text"),a=$('input[name="_vfbp_form_id"]').val(),o=$("#vfb-freshbooks-verify-api .spinner").show().css("visibility","visible");$.get(ajaxurl,{action:"vfbp-connect-freshbooks",api:t,domain:i,form:a,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){o.hide();var t=$.parseJSON(e);$(n).html('<span class="status-'+t.status+'">'+t.message+"</span>"),$("#vfbp-addon-settings").submit()})}),$("#vfb-freshbooks-deactivate-api").click(function(e){e.preventDefault();var t=$("#freshbooks-api").val(),i=$("#vfb-verified-freshbooks-text"),n=$('input[name="_vfbp_form_id"]').val(),a=$("#vfb-freshbooks-verify-api .spinner").show().css("visibility","visible");$.get(ajaxurl,{action:"vfbp-disconnect-freshbooks",api:t,form:n,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){a.hide();var t=$.parseJSON(e);$(i).html('<span class="status-'+t.status+'">'+t.message+"</span>"),$("#vfbp-addon-settings").submit()})});var i=[],n=$(".vfb-payment-field-ids");n.length&&$(n).each(function(){i.push($(this).val())}),$(document).on("change","#vfb-payment-fields",function(){var t=$(this).val(),n=$('input[name="_vfbp_form_id"]').val(),a=$(this);""!==t&&(i.push(t),e(t,$(".vfb-payment-assign-prices-header")),$.post(ajaxurl,{action:"vfbp-price-fields",form:n,fields:i,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){a.html(e)}))}),$(document).on("click",".vfb-payment-remove-field",function(e){e.preventDefault();for(var t=[],n=$('input[name="_vfbp_form_id"]').val(),a=$(this).parents(".vfb-pricing-fields-container"),o=$(this).attr("href"),s=o.split("&"),r=0;r<s.length;r++){var c=s[r].indexOf("="),f=s[r].substring(0,c),l=s[r].substring(c+1);t[f]=l}var p=t.field,d=i.indexOf(p);-1!==d&&i.splice(d,1),a.fadeOut(350,function(){$(this).remove()}),$.post(ajaxurl,{action:"vfbp-price-fields",form:n,field:i,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){$("#vfb-payment-fields").html(e)})})}),jQuery(document).ready(function($){$("#smtp-auth").change(function(){$("#smtp-auth-details").toggle($(this).prop("checked"))}),$("#custom-validation-msgs").change(function(){$("#vfb-validation-msgs").toggle($(this).prop("checked"))}),$("#vfb-verify-license .spinner, #vfb-deactivate-license .spinner").hide(),$("#vfb-verify-license").click(function(e){e.preventDefault();var t=$("#license-key").val(),i=$("#license-email").val(),n=$("#vfb-verified-text"),a=$("#vfb-verify-license .spinner").show().css("visibility","visible");$.get(ajaxurl,{action:"vfbp-verify-license",license:t,email:i,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){a.hide();var t=$.parseJSON(e);$(n).html('<span class="status-'+t.status+'">'+t.message+"</span>"),1===t.status&&$("#vfbp-settings").submit()})}),$("#vfb-deactivate-license").click(function(e){e.preventDefault();var t=$("#license-key").val(),i=$("#license-email").val(),n=$("#vfb-verified-text"),a=$("#vfb-deactivate-license .spinner").show().css("visibility","visible");$.get(ajaxurl,{action:"vfbp-deactivate-license",license:t,email:i,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){a.hide();var t=$.parseJSON(e);$(n).html('<span class="status-'+t.status+'">'+t.message+"</span>"),$("#vfbp-settings").submit()})})}),jQuery(document).ready(function($){if("edit-vfb_entry"===pagenow){var e=$("#vfb-entry-form-ids").val();$(document).on("click",".hide-column-tog",function(){var t=columns.hidden();$.post(ajaxurl,{action:"vfbp-entry-columns",columns:t,form_id:e,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce})})}}),jQuery(document).ready(function($){$("#vfbp-export").find("input:radio").change(function(){"entries"===$(this).val()?$(".vfb-export-entries-options").show():$(".vfb-export-entries-options").hide()}),$("#vfb-export-select-all").click(function(e){e.preventDefault(),$('#vfb-export-entries-fields input[type="checkbox"]').prop("checked",!0)}),$("#vfb-export-unselect-all").click(function(e){e.preventDefault(),$('#vfb-export-entries-fields input[type="checkbox"]').prop("checked",!1)}),$("#start-date").datetimepicker({format:"Y/m/d",onShow:function(){this.setOptions({maxDate:$("#end-date").val()?$("#end-date").val():!1})},timepicker:!1,closeOnDateSelect:!0}),$("#end-date").datetimepicker({format:"Y/m/d",onShow:function(){this.setOptions({minDate:$("#start-date").val()?$("#start-date").val():!1})},timepicker:!1,closeOnDateSelect:!0}),$("#vfb-export-forms-list").change(function(){var e=$(this).val();$("#vfb-export-entries-fields").html("Loading..."),$.get(ajaxurl,{action:"vfbp-export-fields",id:e,vfbp_ajax_nonce:vfbp_settings.vfbp_ajax_nonce}).done(function(e){$("#vfb-export-entries-fields").html(e)})})});