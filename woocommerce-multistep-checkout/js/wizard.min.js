jQuery(document).ready(function(d){function h(a){if(result=jQuery(".form-row#"+a+"_postcode_field").length>0&&0!=jQuery("#"+a+"_postcode").val()&&jQuery("#"+a+"_country").length>0&&0!=jQuery("#"+a+"_country").val(),result){var b={action:"valid_post_code",country:jQuery("#"+a+"_country").val(),postCode:jQuery("#"+a+"_postcode").val()};d("#wizard").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),jQuery.post(wmc_wizard.ajaxurl,b,function(b){return d("#wizard").unblock(),0!=b||(jQuery("#"+a+"_postcode").parent().removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),!1)})}}function i(){var a=!1;if(jQuery("form.checkout").valid()&&(a=!0),0==wmc_wizard.isAuthorizedUser&&(d("#shipping_state_field").is(":visible")&&d("#shipping_state").is(["required"])&&(d("#shipping_state_field").hasClass("woocommerce-validated")?(d("#shipping_state_field").find("label.error-class").remove(),d("#s2id_shipping_state").removeClass("invalid-state")):(d("#shipping_state_field").has("label.error-class").length||(d("#s2id_shipping_state").addClass("invalid-state"),d("#shipping_state_field").append('<label class="error-class">'+wmc_wizard.error_msg+"</label>")),a=!1)),d("#billing_state_field").is(":visible")&&d("#billing_state").is(["required"])&&(d("#billing_state_field").hasClass("woocommerce-validated")?(d("#billing_state_field").find("label.error-class").remove(),d("#s2id_billing_state").removeClass("invalid-state")):(d("#billing_state_field").has("label.error-class").length||(d("#s2id_billing_state").addClass("invalid-state"),d("#billing_state_field").append('<label class="error-class">'+wmc_wizard.error_msg+"</label>")),a=!1))),wmc_wizard.isAuthorizedUser&&(d("#billing_state_field").is(":visible")&&d("#billing_state").is(["required"])&&(""==d.trim(d("#billing_state").val())?(d("#s2id_billing_state").addClass("invalid-state"),d("#billing_state_field").has(".error-class").length||d("#billing_state_field").has("label.error").length||d("#billing_state_field label.error").is(":visible")||d("#billing_state_field").append('<label class="error-class">'+wmc_wizard.error_msg+"</label>"),a=!1):(d("#billing_state_field").find("label.error-class").remove(),d("#s2id_billing_state").removeClass("invalid-state"))),d("#shipping_state_field").is(":visible")&&(d("#shipping_state").is(["required"])?""==d.trim(d("#shipping_state").val())&&(d("#s2id_shipping_state").addClass("invalid-state"),d("#shipping_state_field").has("label.error").length||d("#shipping_state_field label.error").is(":visible")||d("#shipping_state_field").append('<label class="error-class">'+wmc_wizard.error_msg+"</label>"),a=!1):(d("#shipping_state_field").find("label.error-class").remove(),d("#s2id_shipping_state").removeClass("invalid-state")))),"true"==wmc_wizard.zipcode_validation&&jQuery("#billing_postcode").closest("#billing_postcode_field").hasClass("woocommerce-invalid")&&(a=!1),d("#billing_phone").length){var b=jQuery("#billing_phone").val();b=b.replace(/[\s\#0-9_\-\+\(\)]/g,""),b=jQuery.trim(b),b.length>0&&(a=!1,jQuery("#billing_phone_field").removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),d("#billing_phone_field").has("label.error-class").length||d("#billing_phone_field").append('<label class="error-class">invalid phone number</label>'))}return"true"==wmc_wizard.zipcode_validation&&jQuery("#ship-to-different-address-checkbox").is(":checked")&&jQuery("#ship-to-different-address-checkbox").is(":visible")&&(jQuery("#shipping_postcode").closest("#shipping_postcode_field").hasClass("woocommerce-validated")||(a=!1)),n()||(a=!1),a}function j(a){jQuery("form.login input#"+a).parent().removeClass("woocommerce-validated"),jQuery("form.login input#"+a).parent().addClass("woocommerce-invalid woocommerce-invalid-required-field"),jQuery("form.login input#"+a).parent().addClass("validate-required")}function k(){return validate=!1,d("#wizard div.current").find("form.checkout_coupon").length&&(validate=!0),validate}function l(){jQuery(".coupon-step").hasClass("current")?"fade"===wmc_wizard.transitionEffect?jQuery("form.checkout_coupon").appendTo(".coupon-step").fadeIn(100):jQuery("form.checkout_coupon").appendTo(".coupon-step").slideDown(100):jQuery(".coupon-step").length&&d("form.checkout_coupon").hide().appendTo(".container-coupon-login-form")}function m(){jQuery(".login-step").hasClass("current")?"fade"==wmc_wizard.transitionEffect?jQuery("form.login").appendTo(".login-step").fadeIn(100):jQuery("form.login").appendTo(".login-step").slideDown(100):jQuery(".login-step").length&&jQuery("form.login").hide().appendTo(".container-coupon-login-form")}function n(){var a=!0;return jQuery('input[name="legal"]').length&&jQuery('input[name="legal"]').is(":visible")&&(jQuery('input[name="legal"]').is(":checked")?(jQuery('input[name="legal"]').parent().removeAttr("style"),jQuery(".terms-error").remove(),a=!0):(jQuery('input[name="legal"]').attr("required","required"),jQuery(".terms").css("border","1px solid #8a1f11"),d(".terms-error").length||jQuery('<p class="terms-error">'+wmc_wizard.terms_error+"</p>").insertAfter(".wc-terms-and-conditions"),a=!1)),jQuery('input[name="terms"]').length&&jQuery('input[name="terms"]').is(":visible")&&(jQuery('input[name="terms"]').is(":checked")?(jQuery('input[name="terms"]').parent().removeAttr("style"),jQuery(".terms-error").remove(),a=!0):(jQuery('input[name="terms"]').attr("required","required"),jQuery('input[name="terms"]').parent().css("border","1px solid #8a1f11"),d(".terms-error").length||jQuery('<p class="terms-error">'+wmc_wizard.terms_error+"</p>").insertAfter(".wc-terms-and-conditions"),a=!1)),a}if(d(".wmc-loading-img").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),jQuery("form.checkout").show(),jQuery("form.checkout .validate-required :input").attr("required","required"),jQuery("form.checkout .validate-email .input-text").addClass("email"),0==wmc_wizard.isAuthorizedUser&&"false"!=wmc_wizard.include_login&&"no"!=wmc_wizard.woo_include_login)var e=wmc_wizard.no_account_btn;else var e=wmc_wizard.next;var e;"true"==wmc_wizard.wmc_remove_numbers?jQuery("#wizard").steps({transitionEffect:wmc_wizard.transitionEffect,stepsOrientation:wmc_wizard.stepsOrientation,enableAllSteps:!1,enablePagination:wmc_wizard.enablePagination,titleTemplate:"#title#",labels:{next:e,previous:wmc_wizard.previous,finish:wmc_wizard.finish},onInit:function(a,b){d(".wmc-loading-img").hide(),d("#wizard .content .current input[type=text]").first().focus(),d(".actions > ul > li:first-child").attr("style","display:none")},onStepChanging:function(e,f,g){return d(this).trigger("onStepChanging",[a=e,b=f,c=g]),!!(0==f&&0==wmc_wizard.isAuthorizedUser&&"false"!=wmc_wizard.include_login&&"no"!=wmc_wizard.woo_include_login||f>g||k())||i()},onStepChanged:function(e,f,g){d(this).trigger("onStepChanged",[a=e,b=f,c=g]),f>0?d(".actions > ul > li:first-child").attr("style",""):d(".actions > ul > li:first-child").attr("style","display:none"),0==f&&0==wmc_wizard.isAuthorizedUser&&"false"!=wmc_wizard.include_login&&"no"!=wmc_wizard.woo_include_login?(jQuery('form.checkout a[href="#next"]').html(wmc_wizard.no_account_btn),jQuery('form.checkout a[href="#previous"]').hide()):(jQuery('form.checkout a[href="#next"]').html(wmc_wizard.next),jQuery('form.checkout a[href="#previous"]').show())},onFinishing:function(a,b){d(this).trigger("onFinishing")}}):jQuery("#wizard").steps({transitionEffect:wmc_wizard.transitionEffect,stepsOrientation:wmc_wizard.stepsOrientation,enableAllSteps:!1,enablePagination:wmc_wizard.enablePagination,labels:{next:e,previous:wmc_wizard.previous,finish:wmc_wizard.finish},onInit:function(a,b){d(".wmc-loading-img").hide(),d("#wizard .content .current input[type=text]").first().focus(),d(".actions > ul > li:first-child").attr("style","display:none")},onStepChanging:function(e,f,g){return d(this).trigger("onStepChanging",[a=e,b=f,c=g]),!!(0==f&&0==wmc_wizard.isAuthorizedUser&&"false"!=wmc_wizard.include_login&&"no"!=wmc_wizard.woo_include_login||f>g||k())||i()},onStepChanged:function(e,f,g){d(this).trigger("onStepChanged",[a=f,b=f,c=g]),f>0?d(".actions > ul > li:first-child").attr("style",""):d(".actions > ul > li:first-child").attr("style","display:none"),0==f&&0==wmc_wizard.isAuthorizedUser&&"false"!=wmc_wizard.include_login&&"no"!=wmc_wizard.woo_include_login?(jQuery('form.checkout a[href="#next"]').html(wmc_wizard.no_account_btn),jQuery('form.checkout a[href="#previous"]').hide()):(jQuery('form.checkout a[href="#next"]').html(wmc_wizard.next),jQuery('form.checkout a[href="#previous"]').show())},onFinishing:function(a,b){d(this).trigger("onFinishing")}}),jQuery.extend(jQuery.validator.messages,{required:wmc_wizard.error_msg,email:wmc_wizard.email_error_msg}),jQuery(".actions > ul li:last a").addClass("finish-btn"),jQuery(".finish-btn").click(function(){jQuery("#place_order").trigger("click")});var f=jQuery("#wizard ul[role='tablist'] > li").length;if(5==f&&jQuery("#wizard").addClass("five-steps"),3==f&&jQuery("#wizard").addClass("three-steps"),"vertical"!=wmc_wizard.stepsOrientation){var f=jQuery("#wizard ul[role='tablist'] > li").length,g=100/f;d("#wizard .steps ul li").css("width",g+"%")}"true"==wmc_wizard.zipcode_validation&&(jQuery("body").on("change","#billing_country",function(){d("#billing_country").is(":visible")&&h("billing")}),jQuery("body").on("blur","#billing_postcode",function(){d("#billing_postcode").is(":visible")&&h("billing")}),jQuery("body").on("change","#shipping_country",function(){d("#shipping_country").is(":visible")&&h("shipping")}),jQuery("body").on("blur","#shipping_postcode",function(){d("#shipping_postcode").is(":visible")&&h("shipping")})),jQuery("form.login").submit(function(a){if("false"!=wmc_wizard.include_login){a.preventDefault();var b="form.login",c=!1;if(0==jQuery(b+" input#username").val()&&(c=!0,j("username")),0==jQuery(b+" input#password").val()&&(c=!0,j("password")),0!=c)return!1;0==jQuery(b+" input#rememberme").is(":checked")?rememberme=!1:rememberme=!0,d("#wizard").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var f={action:"wmc_check_user_login",username:jQuery(b+" input#username").val(),password:jQuery(b+" input#password").val(),rememberme:rememberme,_ajax_nonce:wmc_wizard.login_nonce};jQuery.post(wmc_wizard.ajaxurl,f,function(a){d("#wizard").unblock(),"successfully"==a?location.reload():d("form.login > .error-msg").length||jQuery("form.login").prepend(a)})}}),d("#billing_phone").on("blur input change",function(){if(d("#billing_phone").length&&d(this).prop("required")){var a=jQuery("#billing_phone").val();a=a.replace(/[\s\#0-9_\-\+\(\)]/g,""),a=jQuery.trim(a),""!=d(this).val()&&d("#billing_phone").next("label.error").remove(),a.length>0?(jQuery("#billing_phone_field").removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),d("#billing_phone_field").has("label.error-class").length||d("#billing_phone_field").append('<label class="error-class">'+wmc_wizard.phone_error_msg+"</label>")):d("#billing_phone_field").has("label.error-class").length&&d("#billing_phone").next().remove()}}),d(window).keydown(function(a){if(13==a.keyCode)return a.preventDefault(),!1}),d("form.checkout").submit(function(a){d(".terms-error").is(":visible")&&(a.preventDefault(),a.stopImmediatePropagation())}),jQuery("#wizard").on("onStepChanged",function(a,b,c){d("#wizard .content .current input[type=text]").first().focus(),l(),m()}),jQuery("#wizard").on("onFinishing",function(){n()})});