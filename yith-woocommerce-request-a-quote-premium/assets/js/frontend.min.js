jQuery(document).ready(function(b){var p=b("body");b(".add-request-quote-button");var f=b(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote"),k="undefined"!==typeof ywraq_frontend?ywraq_frontend.block_loader:!1;b(".yith-ywraq-item-remove");b.fn.yith_ywraq_variations=function(){var a=b('[name|="product_id"]'),c=a.val(),d=b(".add-to-quote-"+c).find("a"),e=d.parents(".yith-ywraq-add-to-quote"),c=b('[name|="variation_id"]');if(0>=c.length)return!1;d.parent().hide().removeClass("show");
c.on("change",function(){var c=[],g=""+e.attr("data-variation");"undefined"!=g&&(c=g.split(","));b(".yith_ywraq_add_item_product-response-"+a.val()).hide().removeClass("show");""==b(this).val()?d.parent().hide().removeClass("show"):0<=b.inArray(b(this).val(),c)?(b(".yith_ywraq_add_item_response-"+a.val()).show().removeClass("hide"),b(".yith_ywraq_add_item_browse-list-"+a.val()).show().removeClass("hide")):(d.parent().show().addClass("show"),b(".yith_ywraq_add_item_response-"+a.val()).hide().removeClass("show"),
b(".yith_ywraq_add_item_browse-list-"+a.val()).hide().removeClass("show"))})};p.hasClass("single-product")&&b.fn.yith_ywraq_variations();b(document).on("click",".add-request-quote-button",function(a){a.preventDefault();var c=b(this);c.closest(".yith-ywraq-add-to-quote");a="ac";var d="",d=c.closest(".cart").length?c.closest(".cart"):c.siblings(".cart").first().length?c.siblings(".cart").first():b(".composite_form").length?b(".composite_form"):b(".cart");if(0<c.closest("ul.products").length)var e="",
h=c.closest("li.product").find("a.add_to_cart_button"),g=h.data("product_id");else e=c.closest(".product").find('input[name="add-to-cart"]'),h=c.closest(".product").find('input[name="product_id"]'),g=h.length?h.val():e.val();var l="undefined"==typeof g?c.data("product_id"):g;0<e.length&&0<h.length?a=d.serialize():0<e.length&&0<d.length?a=d.serialize():0==e.length&&0<d.length?a=d.serialize():0==e.length&&(a="quantity=1");a+="&action=yith_ywraq_action&ywraq_action=add_item&product_id="+c.data("product_id")+
"&wp_nonce="+c.data("wp_nonce");0<=a.indexOf("add-to-cart")&&(a=a.replace(/add-to-cart/g,"yith-add-to-cart"));b(document).trigger("yith_ywraq_action_before");if("undefined"!==typeof yith_wapo_general&&!yith_wapo_general.do_submit)return!1;b.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:a,beforeSend:function(){c.after(' <img src="'+k+'" >')},complete:function(){c.next().remove()},success:function(a){"true"==a.result||"exists"==
a.result?"yes"==ywraq_frontend.go_to_the_list?window.location.href=a.rqa_url:(b(".yith_ywraq_add_item_product-response-"+l).show().removeClass("hide").html(a.message),b(".yith_ywraq_add_item_browse-list-"+l).show().removeClass("hide"),c.parent().hide().removeClass("show").addClass("addedd"),b(".add-to-quote-"+l).attr("data-variation",a.variations),f.length&&(f.ywraq_refresh_widget(),f=b(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote"))):"false"==a.result&&b(".yith_ywraq_add_item_response-"+
l).show().removeClass("hide").html(a.message)}})});b.fn.ywraq_refresh_widget=function(){f.each(function(){var a=b(this),c=a.find(".yith-ywraq-list-wrapper"),d=a.find(".yith-ywraq-list"),e=a.find(".yith-ywraq-list-widget-wrapper").data("instance");b.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:e+"&ywraq_action=refresh_quote_list&action=yith_ywraq_action",beforeSend:function(){d.css("opacity",.5);a.hasClass("widget_ywraq_list_quote")&&c.prepend(' <img src="'+
k+'" >')},complete:function(){a.hasClass("widget_ywraq_list_quote")&&c.next().remove();d.css("opacity",1)},success:function(b){a.hasClass("widget_ywraq_mini_list_quote")?a.find(".yith-ywraq-list-widget-wrapper").html(b.mini):a.find(".yith-ywraq-list-widget-wrapper").html(b.large)}})})};b(document).on("click",".yith-ywraq-item-remove",function(a){a.preventDefault();var c=b(this),d=c.data("remove-item");a=c.parents(".ywraq-wrapper");b("#yith-ywraq-form");var e=a.find(".wpcf7-form");a="";a="action=yith_ywraq_action&ywraq_action=remove_item&key="+
c.data("remove-item")+"&wp_nonce="+c.data("wp_nonce")+"&product_id="+c.data("product_id");b.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:a,beforeSend:function(){c.find(".ajax-loading").css("visibility","visible")},complete:function(){c.siblings(".ajax-loading").css("visibility","hidden")},success:function(a){if(1===a){a=b("[data-remove-item='"+d+"']").parents(".cart_item");if(a.hasClass("composite-parent")){var c=a.data("composite-id");
b("[data-composite-id='"+c+"']").remove()}a.remove();0===b(".cart_item").length&&(e.length&&e.remove(),b("#yith-ywraq-form, .yith-ywraq-mail-form-wrapper").remove(),b("#yith-ywraq-message").html(ywraq_frontend.no_product_in_list));f.length&&(f.ywraq_refresh_widget(),f=b(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote"))}}})});0<b(".wpcf7-submit").closest(".wpcf7").length&&b(document).find(".wpcf7").each(function(){var a=b(this);if(a.find('input[name="_wpcf7"]').val()==ywraq_frontend.cform7_id)a.on("wpcf7:mailsent",
function(){b.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_order_action"),dataType:"json",data:{lang:ywraq_frontend.current_lang,action:"yith_ywraq_order_action",ywraq_order_action:"mail_sent_order_created"},success:function(a){""!=a.rqa_url&&(window.location.href=a.rqa_url)}})})});b(".quotes-actions").find(".accept").on("click",function(a){if(b(this).hasClass("pay"))return!0;a.preventDefault();var c=b(this);a="action=yith_ywraq_order_action&ywraq_order_action=accept_order&order_id="+
c.parents(".quotes-actions").data("order_id");b.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_order_action"),dataType:"json",data:a,beforeSend:function(){c.after(' <img src="'+k+'" >')},complete:function(){c.next().remove()},success:function(a){0!==a.result&&(window.location.href=a.rqa_url)}})});var m=b(".quotes-actions").find(".reject");b(".my_account_quotes");m.prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,
opacity:.8,deeplinking:!1});m.on("click",function(a){a.preventDefault();a=b(this).parents(".quotes-actions").data("order_id");b("#modal-order-number").text(a);b(".reject-quote-modal-button").attr("data-order_id",a);m.prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1})});b(document).on("click",".close-quote-modal-button",function(a){a.preventDefault();b.prettyPhoto.close()});b(document).on("click",".reject-quote-modal-button",function(a){a.preventDefault();
a=b(this);var c=a.data("order_id");b("#modal-order-number");var d=a.closest("body").find(".my_account_quotes").find('[data-order_id="'+c+'"]').parent();a="action=yith_ywraq_order_action&ywraq_order_action=reject_order&order_id="+c;b.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_order_action"),dataType:"json",data:a,beforeSend:function(){d.after(' <img src="'+k+'" >')},complete:function(){d.siblings(".ajax-loading").css("visibility","hidden")},success:function(a){0!==
a.result&&(d.find(".reject").hide(),d.find(".accept").hide(),d.find(".raq_status").removeClass("pending").addClass("rejected").text(a.status),b.prettyPhoto.close())}})});var n;b(document).on("click",".input-text.qty.text",function(a){"undefined"!==typeof n&&n.abort();var c=b(this);a=c.attr("name");c=c.val();a=a.match(/[^[\]]+(?=])/g);a="action=yith_ywraq_action&ywraq_action=update_item_quantity&quantity="+c+"&key="+a[0];n=b.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%",
"yith_ywraq_action"),dataType:"json",data:a})})});
